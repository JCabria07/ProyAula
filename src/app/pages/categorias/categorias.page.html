<ion-content fullscreen>
  <app-navbar></app-navbar>

  <div class="container py-4">

    <!-- Spinner de carga -->
    <div *ngIf="loading" class="text-center py-5">
      <ion-spinner name="crescent"></ion-spinner>
      <p class="mt-3">Cargando... Por favor espere</p>
    </div>

    <!-- Contenido principal -->
    <div *ngIf="!loading">
      <!-- Gráfico -->
      <div class="card shadow-sm mb-4">
        <div class="card-body text-center">
          <h5 class="card-title mb-3">Distribución de categorías</h5>
          <div class="mx-auto" style="max-width: 600px; width: 100%;">
            <app-donutschart></app-donutschart>
          </div>
        </div>
      </div>

      <!-- Separador -->
      <div class="border-top mt-4 pt-3 text-muted small text-center"></div>

      <!-- Formulario -->
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Registrar nueva categoría</h5>
          <form [formGroup]="formCategoria" (ngSubmit)="guardarCategoria()">
            <div class="mb-3">
              <label class="form-label">Nombre</label>
              <input
                formControlName="nombre_categoria"
                class="form-control"
                placeholder="Ej: Tecnología"
              />
            </div>
            <div class="mb-3">
              <label class="form-label">Descripción</label>
              <textarea
                formControlName="descripcion_categoria"
                class="form-control no-resize"
                rows="2"
                placeholder="Describe la categoría..."
              ></textarea>
            </div>
            <button
              class="btn btn-primary w-100"
              type="submit"
              [disabled]="formCategoria.invalid"
            >
              Guardar
            </button>
          </form>
        </div>
      </div>

      <!-- Footer -->
      <div class="border-top mt-4 pt-3 text-muted small text-center">
        © 2025 AssetControl
      </div>
    </div>
  </div>
</ion-content>